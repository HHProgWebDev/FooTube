{"version":3,"sources":["../src/script.js"],"names":["initIndex","main","document","querySelector","empty","loadJSON","data","JSON","parse","response","videos","categories","forEach","category","createCategory","section","createElement","sectionTitle","setAttribute","appendChild","createTextNode","title","videoId","vIndex","GetIndexById","sectionItem","videoLink","videoImage","videoImg","videoLength","videoTitle","videoDate","poster","durationFormat","duration","timeSinceCreated","created","minInSec","min","Math","floor","sec","secSince","Date","now","hourInSec","dayInSec","weekInSec","monthInSec","yearInSec","n","el","firstChild","removeChild","callback","r","XMLHttpRequest","overrideMimeType","open","onload","status","console","log","onerror","send","id","ind","index","obj","addEventListener"],"mappings":"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","file":"script.js","sourcesContent":["/*\r\n* Fallið byrjar þegar DOM tréið hefur hlaðist og hleður initIndex\r\n* og skilgreinir hvað á að gera þegar videos.json hleðst inn.\r\n*/\r\nfunction initIndex() {\r\n  const main = document.querySelector('main');\r\n\r\n  empty(main);\r\n\r\n  loadJSON(response => {\r\n    const data = JSON.parse(response);\r\n    const videos = data.videos;\r\n    const categories = data.categories;\r\n\r\n    categories.forEach(function (category) {\r\n      createCategory(main, category, videos);\r\n    })\r\n  });\r\n}\r\n\r\n/*\r\n* Fallið createCategory býr til myndbanda flokk Fyrir\r\n* index.html\r\n*/\r\nfunction createCategory(main, category, videos) {\r\n  const section = document.createElement('section');\r\n  const sectionTitle = document.createElement('h2');\r\n\r\n  section.setAttribute('class', 'category');\r\n  sectionTitle.setAttribute('class', 'category__title');\r\n  sectionTitle.appendChild(document.createTextNode(category.title));\r\n\r\n  main.appendChild(section);\r\n  section.appendChild(sectionTitle);\r\n\r\n  category.videos.forEach(function (videoId) {\r\n    let vIndex = GetIndexById(videos, videoId);\r\n\r\n    let sectionItem = document.createElement('div');\r\n    let videoLink = document.createElement('a');\r\n    let videoImage = document.createElement('div');\r\n    let videoImg = document.createElement('img');\r\n    let videoLength = document.createElement('div');\r\n    let videoTitle = document.createElement('h2');\r\n    let videoDate = document.createElement('h3');\r\n\r\n    sectionItem.setAttribute('class', 'category__item');\r\n    videoLink.setAttribute('class', 'video');\r\n    videoLink.setAttribute('href', './player.html?id=' + videoId);\r\n    videoImage.setAttribute('class', 'video__image');\r\n    videoImg.setAttribute('class', 'video__img');\r\n    videoImg.setAttribute('src', videos[vIndex].poster);\r\n    videoLength.setAttribute('class', 'video__length');\r\n    videoLength.appendChild(document.createTextNode(durationFormat(videos[vIndex].duration)));\r\n    videoTitle.setAttribute('class', 'video__title');\r\n    videoTitle.appendChild(document.createTextNode(videos[vIndex].title));\r\n    videoDate.setAttribute('class', 'video__date');\r\n    videoDate.appendChild(document.createTextNode(timeSinceCreated(videos[vIndex].created)));\r\n\r\n    section.appendChild(sectionItem);\r\n    sectionItem.appendChild(videoLink);\r\n    videoLink.appendChild(videoImage);\r\n    videoImage.appendChild(videoImg);\r\n    videoImage.appendChild(videoLength);\r\n    videoLink.appendChild(videoTitle);\r\n    videoLink.appendChild(videoDate);\r\n  })\r\n}\r\n\r\nfunction durationFormat(duration) {\r\n  const minInSec = 60;\r\n\r\n  const min = Math.floor(duration / minInSec);\r\n  const sec = duration - min * minInSec;\r\n\r\n  return `${min}:${sec}`;\r\n\r\n\r\n}\r\n\r\n/*\r\n* Fallið timeSinceCreated tekur tíma í millisekundum\r\n* og skilar streng um hve langt það var.\r\n*/\r\nfunction timeSinceCreated(created) {\r\n  const secSince = (Date.now() - created) / 1000;\r\n  const hourInSec = 60 * 60;\r\n  const dayInSec = 24 * hourInSec;\r\n  const weekInSec = 7 * dayInSec;\r\n  const monthInSec = 30 * dayInSec;\r\n  const yearInSec = 365 * dayInSec\r\n\r\n  if (secSince >= yearInSec) {\r\n    const n = Math.floor(secSince / yearInSec);\r\n\r\n    if (n == 1) {\r\n      return `Fyrir ${n} ári síðan`;\r\n    } else {\r\n      return `Fyrir ${n} árum síðan`;\r\n    }\r\n  } else if (secSince >= monthInSec) {\r\n    const n = Math.floor(secSince / monthInSec);\r\n\r\n    if (n == 1) {\r\n      return `Fyrir ${n} mánuði síðan`;\r\n    } else {\r\n      return `Fyrir ${n} mánuðum síðan`;\r\n    }\r\n  } else if (secSince >= weekInSec) {\r\n    const n = Math.floor(secSince / weekInSec);\r\n\r\n    if (n == 1) {\r\n      return `Fyrir ${n} viku síðan`;\r\n    } else {\r\n      return `Fyrir ${n} vikum síðan`;\r\n    }\r\n  } else if (secSince >= dayInSec) {\r\n    const n = Math.floor(secSince / dayInSec);\r\n\r\n    if (n == 1) {\r\n      return `Fyrir ${n} degi síðan`;\r\n    } else {\r\n      return `Fyrir ${n} dögum síðan`;\r\n    }\r\n  } else {\r\n    const n = Math.floor(secSince / hourInSec);\r\n\r\n    if (n == 1) {\r\n      return `Fyrir ${n} klukkustund síðan`;\r\n    } else {\r\n      return `Fyrir ${n} klukkustundum síðan`;\r\n    }\r\n  }\r\n}\r\n\r\n/*\r\n* empty tæmir öll börn el.\r\n*/\r\nfunction empty(el) {\r\n  while(el.firstChild) {\r\n    el.removeChild(el.firstChild);\r\n  }\r\n}\r\n\r\n/*\r\n* loadJSON hleður inn videos.json með XMLHttpRequest\r\n*/\r\nfunction loadJSON(callback) {\r\n  const r = new XMLHttpRequest();\r\n  r.overrideMimeType(\"application/json\");\r\n  r.open('GET', 'videos.json', true);\r\n\r\n\r\n  r.onload = function() {\r\n    if (r.status >= 200 && r.status < 400) {\r\n      callback(r.response);\r\n    } else {\r\n      console.log('villa!',r);\r\n    }\r\n  };\r\n\r\n  r.onerror = function() {\r\n    console.log('villa í tengingu');\r\n  }\r\n\r\n  r.send();\r\n}\r\n\r\n/*\r\n* getIndex tekur fylki data af hlutum obj og skilar index af data\r\n* með attribute obj.id=id.\r\n*/\r\nfunction GetIndexById(data, id) {\r\n  let ind = 0;\r\n  let index = 0;\r\n\r\n  data.forEach(function(obj) {\r\n    if(obj.id == id) {\r\n      index = ind;\r\n    } else {\r\n      ind += 1;\r\n    }\r\n  });\r\n\r\n  return index;\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  initIndex();\r\n});\r\n"]}