{"version":3,"sources":["../src/script.js"],"names":["durationFormat","duration","minInSec","min","Math","floor","sec","minStr","secStr","timeSinceCreated","created","secSince","Date","now","hourInSec","dayInSec","weekInSec","monthInSec","yearInSec","n","empty","el","firstChild","removeChild","loadJSON","callback","r","XMLHttpRequest","overrideMimeType","open","onload","status","response","console","log","onerror","send","GetIndexById","data","id","ind","index","forEach","obj","createCategory","main","category","videos","section","document","createElement","sectionTitle","sectionItems","setAttribute","appendChild","createTextNode","title","videoId","vIndex","videoLink","videoImage","videoImg","videoLength","videoTitle","videoDate","poster","initIndex","querySelector","JSON","parse","categories","addEventListener"],"mappings":"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","file":"script.js","sourcesContent":["/*\r\n* Þetta er  javascript skrá fyrir index.html\r\n*/\r\n\r\n/*\r\n* durationFormat tekur inn sekúndufjöla og skilar\r\n* streng á forminu mín:sek\r\n*/\r\nfunction durationFormat(duration) {\r\n  const minInSec = 60;\r\n\r\n  const min = Math.floor(duration / minInSec);\r\n  const sec = duration - (min * minInSec);\r\n\r\n  const minStr = `${min}`;\r\n  const secStr = (sec < 10 ? `0${sec}` : `${sec}`);\r\n\r\n  return `${minStr}:${secStr}`;\r\n}\r\n\r\n/*\r\n* Fallið timeSinceCreated tekur tíma í millisekundum\r\n* og skilar streng um hve langt það var.\r\n*/\r\nfunction timeSinceCreated(created) {\r\n  const secSince = (Date.now() - created) / 1000;\r\n  const hourInSec = 60 * 60;\r\n  const dayInSec = 24 * hourInSec;\r\n  const weekInSec = 7 * dayInSec;\r\n  const monthInSec = 30 * dayInSec;\r\n  const yearInSec = 365 * dayInSec;\r\n\r\n  if (secSince >= yearInSec) {\r\n    const n = Math.floor(secSince / yearInSec);\r\n\r\n    if (n === 1) {\r\n      return `Fyrir ${n} ári síðan`;\r\n    }\r\n    return `Fyrir ${n} árum síðan`;\r\n  } else if (secSince >= monthInSec) {\r\n    const n = Math.floor(secSince / monthInSec);\r\n\r\n    if (n === 1) {\r\n      return `Fyrir ${n} mánuði síðan`;\r\n    }\r\n    return `Fyrir ${n} mánuðum síðan`;\r\n  } else if (secSince >= weekInSec) {\r\n    const n = Math.floor(secSince / weekInSec);\r\n\r\n    if (n === 1) {\r\n      return `Fyrir ${n} viku síðan`;\r\n    }\r\n    return `Fyrir ${n} vikum síðan`;\r\n  } else if (secSince >= dayInSec) {\r\n    const n = Math.floor(secSince / dayInSec);\r\n\r\n    if (n === 1) {\r\n      return `Fyrir ${n} degi síðan`;\r\n    }\r\n    return `Fyrir ${n} dögum síðan`;\r\n  }\r\n  const n = Math.floor(secSince / hourInSec);\r\n\r\n  if (n === 1) {\r\n    return `Fyrir ${n} klukkustund síðan`;\r\n  }\r\n  return `Fyrir ${n} klukkustundum síðan`;\r\n}\r\n\r\n/*\r\n* empty tæmir öll börn el.\r\n*/\r\nfunction empty(el) {\r\n  while (el.firstChild) {\r\n    el.removeChild(el.firstChild);\r\n  }\r\n}\r\n\r\n/*\r\n* loadJSON hleður inn videos.json með XMLHttpRequest\r\n*/\r\nfunction loadJSON(callback) {\r\n  const r = new XMLHttpRequest();\r\n  r.overrideMimeType('application/json');\r\n  r.open('GET', 'videos.json', true);\r\n\r\n\r\n  r.onload = () => {\r\n    if (r.status >= 200 && r.status < 400) {\r\n      callback(r.response);\r\n    } else {\r\n      console.log('villa!', r);\r\n    }\r\n  };\r\n\r\n  r.onerror = () => {\r\n    console.log('villa í tengingu');\r\n  };\r\n\r\n  r.send();\r\n}\r\n\r\n/*\r\n* getIndex tekur fylki data af hlutum obj og skilar index af data\r\n* með attribute obj.id=id.\r\n*/\r\nfunction GetIndexById(data, id) {\r\n  let ind = 0;\r\n  let index = 0;\r\n\r\n  data.forEach((obj) => {\r\n    if (obj.id === id) {\r\n      index = ind;\r\n    } else {\r\n      ind += 1;\r\n    }\r\n  });\r\n\r\n  return index;\r\n}\r\n\r\n/*\r\n* Fallið createCategory býr til myndbanda flokk Fyrir\r\n* index.html\r\n*/\r\nfunction createCategory(main, category, videos) {\r\n  const section = document.createElement('section');\r\n  const sectionTitle = document.createElement('h2');\r\n  const sectionItems = document.createElement('div');\r\n\r\n  section.setAttribute('class', 'category');\r\n  sectionTitle.setAttribute('class', 'category__title');\r\n  sectionTitle.appendChild(document.createTextNode(category.title));\r\n  sectionItems.setAttribute('class', 'category__items');\r\n\r\n  main.appendChild(section);\r\n  section.appendChild(sectionTitle);\r\n  section.appendChild(sectionItems);\r\n\r\n  category.videos.forEach((videoId) => {\r\n    const vIndex = GetIndexById(videos, videoId);\r\n\r\n    const videoLink = document.createElement('a');\r\n    const videoImage = document.createElement('div');\r\n    const videoImg = document.createElement('img');\r\n    const videoLength = document.createElement('div');\r\n    const videoTitle = document.createElement('h3');\r\n    const videoDate = document.createElement('p');\r\n\r\n    videoLink.setAttribute('class', 'video');\r\n    videoLink.setAttribute('href', `./player.html?id=${videoId}`);\r\n    videoImage.setAttribute('class', 'video__image');\r\n    videoImg.setAttribute('class', 'video__img');\r\n    videoImg.setAttribute('src', videos[vIndex].poster);\r\n    videoLength.setAttribute('class', 'video__length');\r\n    videoLength.appendChild(document.createTextNode(durationFormat(videos[vIndex].duration)));\r\n    videoTitle.setAttribute('class', 'video__title');\r\n    videoTitle.appendChild(document.createTextNode(videos[vIndex].title));\r\n    videoDate.setAttribute('class', 'video__date');\r\n    videoDate.appendChild(document.createTextNode(timeSinceCreated(videos[vIndex].created)));\r\n\r\n    sectionItems.appendChild(videoLink);\r\n    videoLink.appendChild(videoImage);\r\n    videoImage.appendChild(videoImg);\r\n    videoImage.appendChild(videoLength);\r\n    videoLink.appendChild(videoTitle);\r\n    videoLink.appendChild(videoDate);\r\n  });\r\n\r\n  main.appendChild(document.createElement('hr'));\r\n}\r\n\r\n/*\r\n* Fallið byrjar þegar DOM tréið hefur hlaðist og hleður initIndex\r\n* og skilgreinir hvað á að gera þegar videos.json hleðst inn.\r\n*/\r\nfunction initIndex() {\r\n  const main = document.querySelector('main');\r\n\r\n  empty(main);\r\n\r\n  loadJSON((response) => {\r\n    const data = JSON.parse(response);\r\n    const { videos, categories } = data;\r\n\r\n    categories.forEach((category) => {\r\n      createCategory(main, category, videos);\r\n    });\r\n  });\r\n}\r\n\r\n/*\r\n* Þessi atburða hlustandi keyrist þegar DOM tréið\r\n* er að fullu hlaðið\r\n*/\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  initIndex();\r\n});\r\n"]}