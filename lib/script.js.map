{"version":3,"sources":["../src/script.js"],"names":["durationFormat","duration","minInSec","min","Math","floor","sec","minStr","secStr","timeSinceCreated","created","secSince","Date","now","hourInSec","dayInSec","weekInSec","monthInSec","yearInSec","n","loadJSON","callback","r","XMLHttpRequest","overrideMimeType","open","onload","status","response","console","log","onerror","send","GetIndexById","data","id","ind","index","forEach","obj","createCategory","main","category","videos","section","document","createElement","sectionTitle","sectionItems","setAttribute","appendChild","createTextNode","title","videoId","vIndex","videoLink","videoImage","videoImg","videoLength","videoTitle","videoDate","poster","initIndex","querySelector","JSON","parse","categories","addEventListener"],"mappings":";;AAAA;;;;AAIA;;;;AAIA,SAASA,cAAT,CAAwBC,QAAxB,EAAkC;AAChC,MAAMC,WAAW,EAAjB;;AAEA,MAAMC,MAAMC,KAAKC,KAAL,CAAWJ,WAAWC,QAAtB,CAAZ;AACA,MAAMI,MAAML,WAAYE,MAAMD,QAA9B;;AAEA,MAAMK,cAAYJ,GAAlB;AACA,MAAMK,SAAUF,MAAM,EAAN,SAAeA,GAAf,QAA0BA,GAA1C;;AAEA,SAAUC,MAAV,SAAoBC,MAApB;AACD;;AAED;;;;AAIA,SAASC,gBAAT,CAA0BC,OAA1B,EAAmC;AACjC,MAAMC,WAAW,CAACC,KAAKC,GAAL,KAAaH,OAAd,IAAyB,IAA1C;AACA,MAAMI,YAAY,KAAK,EAAvB;AACA,MAAMC,WAAW,KAAKD,SAAtB;AACA,MAAME,YAAY,IAAID,QAAtB;AACA,MAAME,aAAa,KAAKF,QAAxB;AACA,MAAMG,YAAY,MAAMH,QAAxB;;AAEA,MAAIJ,YAAYO,SAAhB,EAA2B;AACzB,QAAMC,KAAIf,KAAKC,KAAL,CAAWM,WAAWO,SAAtB,CAAV;;AAEA,QAAIC,OAAM,CAAV,EAAa;AACX,wBAAgBA,EAAhB;AACD;AACD,sBAAgBA,EAAhB;AACD,GAPD,MAOO,IAAIR,YAAYM,UAAhB,EAA4B;AACjC,QAAME,MAAIf,KAAKC,KAAL,CAAWM,WAAWM,UAAtB,CAAV;;AAEA,QAAIE,QAAM,CAAV,EAAa;AACX,wBAAgBA,GAAhB;AACD;AACD,sBAAgBA,GAAhB;AACD,GAPM,MAOA,IAAIR,YAAYK,SAAhB,EAA2B;AAChC,QAAMG,MAAIf,KAAKC,KAAL,CAAWM,WAAWK,SAAtB,CAAV;;AAEA,QAAIG,QAAM,CAAV,EAAa;AACX,wBAAgBA,GAAhB;AACD;AACD,sBAAgBA,GAAhB;AACD,GAPM,MAOA,IAAIR,YAAYI,QAAhB,EAA0B;AAC/B,QAAMI,MAAIf,KAAKC,KAAL,CAAWM,WAAWI,QAAtB,CAAV;;AAEA,QAAII,QAAM,CAAV,EAAa;AACX,wBAAgBA,GAAhB;AACD;AACD,sBAAgBA,GAAhB;AACD;AACD,MAAMA,IAAIf,KAAKC,KAAL,CAAWM,WAAWG,SAAtB,CAAV;;AAEA,MAAIK,MAAM,CAAV,EAAa;AACX,sBAAgBA,CAAhB;AACD;AACD,oBAAgBA,CAAhB;AACD;;AAED;;;AAGA,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AAC1B,MAAMC,IAAI,IAAIC,cAAJ,EAAV;AACAD,IAAEE,gBAAF,CAAmB,kBAAnB;AACAF,IAAEG,IAAF,CAAO,KAAP,EAAc,aAAd,EAA6B,IAA7B;;AAGAH,IAAEI,MAAF,GAAW,YAAM;AACf,QAAIJ,EAAEK,MAAF,IAAY,GAAZ,IAAmBL,EAAEK,MAAF,GAAW,GAAlC,EAAuC;AACrCN,eAASC,EAAEM,QAAX;AACD,KAFD,MAEO;AACL;AACA;AACAC,cAAQC,GAAR,CAAY,QAAZ,EAAsBR,CAAtB;AACD;AACF,GARD;;AAUAA,IAAES,OAAF,GAAY,YAAM;AAChB;AACA;AACAF,YAAQC,GAAR,CAAY,kBAAZ;AACD,GAJD;;AAMAR,IAAEU,IAAF;AACD;;AAED;;;;AAIA,SAASC,YAAT,CAAsBC,IAAtB,EAA4BC,EAA5B,EAAgC;AAC9B,MAAIC,MAAM,CAAV;AACA,MAAIC,QAAQ,CAAZ;;AAEAH,OAAKI,OAAL,CAAa,UAACC,GAAD,EAAS;AACpB,QAAIA,IAAIJ,EAAJ,KAAWA,EAAf,EAAmB;AACjBE,cAAQD,GAAR;AACD,KAFD,MAEO;AACLA,aAAO,CAAP;AACD;AACF,GAND;;AAQA,SAAOC,KAAP;AACD;;AAED;;;;AAIA,SAASG,cAAT,CAAwBC,IAAxB,EAA8BC,QAA9B,EAAwCC,MAAxC,EAAgD;AAC9C,MAAMC,UAAUC,SAASC,aAAT,CAAuB,SAAvB,CAAhB;AACA,MAAMC,eAAeF,SAASC,aAAT,CAAuB,IAAvB,CAArB;AACA,MAAME,eAAeH,SAASC,aAAT,CAAuB,KAAvB,CAArB;;AAEAF,UAAQK,YAAR,CAAqB,OAArB,EAA8B,UAA9B;AACAF,eAAaE,YAAb,CAA0B,OAA1B,EAAmC,iBAAnC;AACAF,eAAaG,WAAb,CAAyBL,SAASM,cAAT,CAAwBT,SAASU,KAAjC,CAAzB;AACAJ,eAAaC,YAAb,CAA0B,OAA1B,EAAmC,qBAAnC;;AAEAR,OAAKS,WAAL,CAAiBN,OAAjB;AACAA,UAAQM,WAAR,CAAoBH,YAApB;AACAH,UAAQM,WAAR,CAAoBF,YAApB;;AAEAN,WAASC,MAAT,CAAgBL,OAAhB,CAAwB,UAACe,OAAD,EAAa;AACnC,QAAMC,SAASrB,aAAaU,MAAb,EAAqBU,OAArB,CAAf;;AAEA,QAAME,YAAYV,SAASC,aAAT,CAAuB,GAAvB,CAAlB;AACA,QAAMU,aAAaX,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AACA,QAAMW,WAAWZ,SAASC,aAAT,CAAuB,KAAvB,CAAjB;AACA,QAAMY,cAAcb,SAASC,aAAT,CAAuB,KAAvB,CAApB;AACA,QAAMa,aAAad,SAASC,aAAT,CAAuB,IAAvB,CAAnB;AACA,QAAMc,YAAYf,SAASC,aAAT,CAAuB,GAAvB,CAAlB;;AAEAS,cAAUN,YAAV,CAAuB,OAAvB,EAAgC,oCAAhC;AACAM,cAAUN,YAAV,CAAuB,MAAvB,wBAAmDI,OAAnD;AACAG,eAAWP,YAAX,CAAwB,OAAxB,EAAiC,cAAjC;AACAQ,aAASR,YAAT,CAAsB,OAAtB,EAA+B,YAA/B;AACAQ,aAASR,YAAT,CAAsB,KAAtB,EAA6BN,OAAOW,MAAP,EAAeO,MAA5C;AACAH,gBAAYT,YAAZ,CAAyB,OAAzB,EAAkC,eAAlC;AACAS,gBAAYR,WAAZ,CAAwBL,SAASM,cAAT,CAAwBnD,eAAe2C,OAAOW,MAAP,EAAerD,QAA9B,CAAxB,CAAxB;AACA0D,eAAWV,YAAX,CAAwB,OAAxB,EAAiC,cAAjC;AACAU,eAAWT,WAAX,CAAuBL,SAASM,cAAT,CAAwBR,OAAOW,MAAP,EAAeF,KAAvC,CAAvB;AACAQ,cAAUX,YAAV,CAAuB,OAAvB,EAAgC,aAAhC;AACAW,cAAUV,WAAV,CAAsBL,SAASM,cAAT,CAAwB1C,iBAAiBkC,OAAOW,MAAP,EAAe5C,OAAhC,CAAxB,CAAtB;;AAEAsC,iBAAaE,WAAb,CAAyBK,SAAzB;AACAA,cAAUL,WAAV,CAAsBM,UAAtB;AACAA,eAAWN,WAAX,CAAuBO,QAAvB;AACAD,eAAWN,WAAX,CAAuBQ,WAAvB;AACAH,cAAUL,WAAV,CAAsBS,UAAtB;AACAJ,cAAUL,WAAV,CAAsBU,SAAtB;AACD,GA5BD;;AA8BAnB,OAAKS,WAAL,CAAiBL,SAASC,aAAT,CAAuB,IAAvB,CAAjB;AACD;;AAED;;;;AAIA,SAASgB,SAAT,GAAqB;AACnB,MAAMrB,OAAOI,SAASkB,aAAT,CAAuB,MAAvB,CAAb;;AAEA3C,WAAS,UAACQ,QAAD,EAAc;AACrB,QAAMM,OAAO8B,KAAKC,KAAL,CAAWrC,QAAX,CAAb;AADqB,QAEbe,MAFa,GAEUT,IAFV,CAEbS,MAFa;AAAA,QAELuB,UAFK,GAEUhC,IAFV,CAELgC,UAFK;;;AAIrBA,eAAW5B,OAAX,CAAmB,UAACI,QAAD,EAAc;AAC/BF,qBAAeC,IAAf,EAAqBC,QAArB,EAA+BC,MAA/B;AACD,KAFD;AAGD,GAPD;AAQD;;AAED;;;;AAIAE,SAASsB,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClDL;AACD,CAFD","file":"script.js","sourcesContent":["/*\n* Þetta er  javascript skrá fyrir index.html\n*/\n\n/*\n* durationFormat tekur inn sekúndufjöla og skilar\n* streng á forminu mín:sek\n*/\nfunction durationFormat(duration) {\n  const minInSec = 60;\n\n  const min = Math.floor(duration / minInSec);\n  const sec = duration - (min * minInSec);\n\n  const minStr = `${min}`;\n  const secStr = (sec < 10 ? `0${sec}` : `${sec}`);\n\n  return `${minStr}:${secStr}`;\n}\n\n/*\n* Fallið timeSinceCreated tekur tíma í millisekundum\n* og skilar streng um hve langt það var.\n*/\nfunction timeSinceCreated(created) {\n  const secSince = (Date.now() - created) / 1000;\n  const hourInSec = 60 * 60;\n  const dayInSec = 24 * hourInSec;\n  const weekInSec = 7 * dayInSec;\n  const monthInSec = 30 * dayInSec;\n  const yearInSec = 365 * dayInSec;\n\n  if (secSince >= yearInSec) {\n    const n = Math.floor(secSince / yearInSec);\n\n    if (n === 1) {\n      return `Fyrir ${n} ári síðan`;\n    }\n    return `Fyrir ${n} árum síðan`;\n  } else if (secSince >= monthInSec) {\n    const n = Math.floor(secSince / monthInSec);\n\n    if (n === 1) {\n      return `Fyrir ${n} mánuði síðan`;\n    }\n    return `Fyrir ${n} mánuðum síðan`;\n  } else if (secSince >= weekInSec) {\n    const n = Math.floor(secSince / weekInSec);\n\n    if (n === 1) {\n      return `Fyrir ${n} viku síðan`;\n    }\n    return `Fyrir ${n} vikum síðan`;\n  } else if (secSince >= dayInSec) {\n    const n = Math.floor(secSince / dayInSec);\n\n    if (n === 1) {\n      return `Fyrir ${n} degi síðan`;\n    }\n    return `Fyrir ${n} dögum síðan`;\n  }\n  const n = Math.floor(secSince / hourInSec);\n\n  if (n === 1) {\n    return `Fyrir ${n} klukkustund síðan`;\n  }\n  return `Fyrir ${n} klukkustundum síðan`;\n}\n\n/*\n* loadJSON hleður inn videos.json með XMLHttpRequest\n*/\nfunction loadJSON(callback) {\n  const r = new XMLHttpRequest();\n  r.overrideMimeType('application/json');\n  r.open('GET', 'videos.json', true);\n\n\n  r.onload = () => {\n    if (r.status >= 200 && r.status < 400) {\n      callback(r.response);\n    } else {\n      // Lætur vita að villa hefur átt sér stað\n      // eslint-disable-next-line no-console\n      console.log('Villa!', r);\n    }\n  };\n\n  r.onerror = () => {\n    // Lætur vita að villa hefur átt sér stað\n    // eslint-disable-next-line no-console\n    console.log('Villa í tengingu');\n  };\n\n  r.send();\n}\n\n/*\n* getIndex tekur fylki data af hlutum obj og skilar index af data\n* með attribute obj.id=id.\n*/\nfunction GetIndexById(data, id) {\n  let ind = 0;\n  let index = 0;\n\n  data.forEach((obj) => {\n    if (obj.id === id) {\n      index = ind;\n    } else {\n      ind += 1;\n    }\n  });\n\n  return index;\n}\n\n/*\n* Fallið createCategory býr til myndbanda flokk Fyrir\n* index.html\n*/\nfunction createCategory(main, category, videos) {\n  const section = document.createElement('section');\n  const sectionTitle = document.createElement('h2');\n  const sectionItems = document.createElement('div');\n\n  section.setAttribute('class', 'category');\n  sectionTitle.setAttribute('class', 'category__title');\n  sectionTitle.appendChild(document.createTextNode(category.title));\n  sectionItems.setAttribute('class', 'category__items row');\n\n  main.appendChild(section);\n  section.appendChild(sectionTitle);\n  section.appendChild(sectionItems);\n\n  category.videos.forEach((videoId) => {\n    const vIndex = GetIndexById(videos, videoId);\n\n    const videoLink = document.createElement('a');\n    const videoImage = document.createElement('div');\n    const videoImg = document.createElement('img');\n    const videoLength = document.createElement('div');\n    const videoTitle = document.createElement('h3');\n    const videoDate = document.createElement('p');\n\n    videoLink.setAttribute('class', 'video col col-4 col-md-6 col-sm-12');\n    videoLink.setAttribute('href', `./player.html?id=${videoId}`);\n    videoImage.setAttribute('class', 'video__image');\n    videoImg.setAttribute('class', 'video__img');\n    videoImg.setAttribute('src', videos[vIndex].poster);\n    videoLength.setAttribute('class', 'video__length');\n    videoLength.appendChild(document.createTextNode(durationFormat(videos[vIndex].duration)));\n    videoTitle.setAttribute('class', 'video__title');\n    videoTitle.appendChild(document.createTextNode(videos[vIndex].title));\n    videoDate.setAttribute('class', 'video__date');\n    videoDate.appendChild(document.createTextNode(timeSinceCreated(videos[vIndex].created)));\n\n    sectionItems.appendChild(videoLink);\n    videoLink.appendChild(videoImage);\n    videoImage.appendChild(videoImg);\n    videoImage.appendChild(videoLength);\n    videoLink.appendChild(videoTitle);\n    videoLink.appendChild(videoDate);\n  });\n\n  main.appendChild(document.createElement('hr'));\n}\n\n/*\n* Fallið byrjar þegar DOM tréið hefur hlaðist og hleður initIndex\n* og skilgreinir hvað á að gera þegar videos.json hleðst inn.\n*/\nfunction initIndex() {\n  const main = document.querySelector('main');\n\n  loadJSON((response) => {\n    const data = JSON.parse(response);\n    const { videos, categories } = data;\n\n    categories.forEach((category) => {\n      createCategory(main, category, videos);\n    });\n  });\n}\n\n/*\n* Þessi atburða hlustandi keyrist þegar DOM tréið\n* er að fullu hlaðið\n*/\ndocument.addEventListener('DOMContentLoaded', () => {\n  initIndex();\n});\n"]}