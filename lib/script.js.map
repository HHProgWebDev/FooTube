{"version":3,"sources":["../src/script.js"],"names":["initIndex","main","document","querySelector","empty","loadJSON","data","JSON","parse","response","videos","categories","forEach","category","createCategory","section","createElement","sectionTitle","sectionItems","setAttribute","appendChild","createTextNode","title","videoId","vIndex","GetIndexById","videoLink","videoImage","videoImg","videoLength","videoTitle","videoDate","poster","durationFormat","duration","timeSinceCreated","created","minInSec","min","Math","floor","sec","minStr","secStr","secSince","Date","now","hourInSec","dayInSec","weekInSec","monthInSec","yearInSec","n","el","firstChild","removeChild","callback","r","XMLHttpRequest","overrideMimeType","open","onload","status","console","log","onerror","send","id","ind","index","obj","addEventListener"],"mappings":"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","file":"script.js","sourcesContent":["/*\n* Fallið byrjar þegar DOM tréið hefur hlaðist og hleður initIndex\n* og skilgreinir hvað á að gera þegar videos.json hleðst inn.\n*/\nfunction initIndex() {\n  const main = document.querySelector('main');\n\n  empty(main);\n\n  loadJSON(response => {\n    const data = JSON.parse(response);\n    const videos = data.videos;\n    const categories = data.categories;\n\n    categories.forEach(function (category) {\n      createCategory(main, category, videos);\n    })\n  });\n}\n\n/*\n* Fallið createCategory býr til myndbanda flokk Fyrir\n* index.html\n*/\nfunction createCategory(main, category, videos) {\n  const section = document.createElement('section');\n  const sectionTitle = document.createElement('h2');\n  const sectionItems = document.createElement('div');\n\n  section.setAttribute('class', 'category');\n  sectionTitle.setAttribute('class', 'category__title');\n  sectionTitle.appendChild(document.createTextNode(category.title));\n  sectionItems.setAttribute('class', 'category__items');\n\n  main.appendChild(section);\n  section.appendChild(sectionTitle);\n  section.appendChild(sectionItems);\n\n  category.videos.forEach(function (videoId) {\n    let vIndex = GetIndexById(videos, videoId);\n\n    let videoLink = document.createElement('a');\n    let videoImage = document.createElement('div');\n    let videoImg = document.createElement('img');\n    let videoLength = document.createElement('div');\n    let videoTitle = document.createElement('h3');\n    let videoDate = document.createElement('p');\n\n    videoLink.setAttribute('class', 'video');\n    videoLink.setAttribute('href', './player.html?id=' + videoId);\n    videoImage.setAttribute('class', 'video__image');\n    videoImg.setAttribute('class', 'video__img');\n    videoImg.setAttribute('src', videos[vIndex].poster);\n    videoLength.setAttribute('class', 'video__length');\n    videoLength.appendChild(document.createTextNode(durationFormat(videos[vIndex].duration)));\n    videoTitle.setAttribute('class', 'video__title');\n    videoTitle.appendChild(document.createTextNode(videos[vIndex].title));\n    videoDate.setAttribute('class', 'video__date');\n    videoDate.appendChild(document.createTextNode(timeSinceCreated(videos[vIndex].created)));\n\n    sectionItems.appendChild(videoLink);\n    videoLink.appendChild(videoImage);\n    videoImage.appendChild(videoImg);\n    videoImage.appendChild(videoLength);\n    videoLink.appendChild(videoTitle);\n    videoLink.appendChild(videoDate);\n  });\n\n  main.appendChild(document.createElement('hr'));\n}\n\nfunction durationFormat(duration) {\n  const minInSec = 60;\n\n  const min = Math.floor(duration / minInSec);\n  const sec = duration - min * minInSec;\n\n  const minStr = '' + min;\n  const secStr = (sec < 10 ? '0' + sec : '' + sec);\n\n  return `${minStr}:${secStr}`;\n}\n\n/*\n* Fallið timeSinceCreated tekur tíma í millisekundum\n* og skilar streng um hve langt það var.\n*/\nfunction timeSinceCreated(created) {\n  const secSince = (Date.now() - created) / 1000;\n  const hourInSec = 60 * 60;\n  const dayInSec = 24 * hourInSec;\n  const weekInSec = 7 * dayInSec;\n  const monthInSec = 30 * dayInSec;\n  const yearInSec = 365 * dayInSec\n\n  if (secSince >= yearInSec) {\n    const n = Math.floor(secSince / yearInSec);\n\n    if (n == 1) {\n      return `Fyrir ${n} ári síðan`;\n    } else {\n      return `Fyrir ${n} árum síðan`;\n    }\n  } else if (secSince >= monthInSec) {\n    const n = Math.floor(secSince / monthInSec);\n\n    if (n == 1) {\n      return `Fyrir ${n} mánuði síðan`;\n    } else {\n      return `Fyrir ${n} mánuðum síðan`;\n    }\n  } else if (secSince >= weekInSec) {\n    const n = Math.floor(secSince / weekInSec);\n\n    if (n == 1) {\n      return `Fyrir ${n} viku síðan`;\n    } else {\n      return `Fyrir ${n} vikum síðan`;\n    }\n  } else if (secSince >= dayInSec) {\n    const n = Math.floor(secSince / dayInSec);\n\n    if (n == 1) {\n      return `Fyrir ${n} degi síðan`;\n    } else {\n      return `Fyrir ${n} dögum síðan`;\n    }\n  } else {\n    const n = Math.floor(secSince / hourInSec);\n\n    if (n == 1) {\n      return `Fyrir ${n} klukkustund síðan`;\n    } else {\n      return `Fyrir ${n} klukkustundum síðan`;\n    }\n  }\n}\n\n/*\n* empty tæmir öll börn el.\n*/\nfunction empty(el) {\n  while(el.firstChild) {\n    el.removeChild(el.firstChild);\n  }\n}\n\n/*\n* loadJSON hleður inn videos.json með XMLHttpRequest\n*/\nfunction loadJSON(callback) {\n  const r = new XMLHttpRequest();\n  r.overrideMimeType(\"application/json\");\n  r.open('GET', 'videos.json', true);\n\n\n  r.onload = function() {\n    if (r.status >= 200 && r.status < 400) {\n      callback(r.response);\n    } else {\n      console.log('villa!',r);\n    }\n  };\n\n  r.onerror = function() {\n    console.log('villa í tengingu');\n  }\n\n  r.send();\n}\n\n/*\n* getIndex tekur fylki data af hlutum obj og skilar index af data\n* með attribute obj.id=id.\n*/\nfunction GetIndexById(data, id) {\n  let ind = 0;\n  let index = 0;\n\n  data.forEach(function(obj) {\n    if(obj.id == id) {\n      index = ind;\n    } else {\n      ind += 1;\n    }\n  });\n\n  return index;\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initIndex();\n});\n"]}