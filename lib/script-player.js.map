{"version":3,"sources":["../src/script-player.js"],"names":["createVideo","body","document","querySelector","main","empty","title","createElement","video","buttonDiv","prev","play","mute","fullscreen","next","returnToIndex","setAttribute","appendChild","createTextNode","loadJSON","response","data","JSON","parse","index","GetIndexById","videos","parseQuery","poster","addEventListener","e","preventDefault","pause","currentTime","paused","volume","requestFullScreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","call","el","firstChild","removeChild","callback","r","XMLHttpRequest","overrideMimeType","open","onload","status","console","log","onerror","send","query","window","location","search","substring","vars","split","i","length","pair","decodeURIComponent","id","ind","forEach","obj"],"mappings":"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","file":"script-player.js","sourcesContent":["/*\n*\n*/\n/*\n*\n*/\nfunction createVideo() {\n  //  Finna body og main element\n  const body = document.querySelector('body');\n  const main = document.querySelector('main');\n  //  Tæma body element.\n  empty(body);\n\n  //  Búa til element.\n  const title = document.createElement('h1');\n  const video = document.createElement('video');\n  const buttonDiv = document.createElement('div')\n  const prev = document.createElement('button');\n  const play = document.createElement('button');\n  const mute = document.createElement('button');\n  const fullscreen = document.createElement('button');\n  const next = document.createElement('button');\n  const returnToIndex = document.createElement('a');\n\n  //  Bæta við texta og attribute á element.\n  title.setAttribute('class', 'video-title');\n  video.setAttribute('class', 'video');\n  buttonDiv.setAttribute('class', 'button-block');\n  prev.appendChild(document.createTextNode('Fyrra'));\n  prev.setAttribute('class', 'button button--prev');\n  play.appendChild(document.createTextNode('Spila'));\n  play.setAttribute('class', 'button button--play');\n  mute.appendChild(document.createTextNode('Hljóð af'));\n  mute.setAttribute('class', 'button button--mute');\n  fullscreen.appendChild(document.createTextNode('Allur skjárinn'));\n  fullscreen.setAttribute('class', 'button button--fullscreen');\n  next.appendChild(document.createTextNode('Næsta'));\n  next.setAttribute('class', 'button button--next');\n  returnToIndex.appendChild(document.createTextNode('Til baka'));\n  returnToIndex.setAttribute('href', '../');\n\n\n  //  Bæta við upplýsingum úr videos.json skv. query streng í url.\n  loadJSON(function (response) {\n    const data = JSON.parse(response);\n    const index = GetIndexById(data.videos, parseQuery());\n    title.appendChild(document.createTextNode(data.videos[index].title));\n    video.setAttribute('src', data.videos[index].video);\n    video.setAttribute('poster', data.videos[index].poster);\n  });\n\n  //  Setja inn element\n  body.appendChild(title);\n  body.appendChild(main);\n  main.appendChild(video);\n  main.appendChild(buttonDiv);\n  buttonDiv.appendChild(prev);\n  buttonDiv.appendChild(play);\n  buttonDiv.appendChild(mute);\n  buttonDiv.appendChild(fullscreen);\n  buttonDiv.appendChild(next);\n  main.appendChild(returnToIndex);\n\n  //  Bæta við takka atburða hlustendum.\n  video.addEventListener('ended', e => {\n    e.preventDefault();\n\n    video.pause();\n    video.currentTime = 0;\n    empty(play);\n    play.appendChild(document.createTextNode('Spila'));\n    play.setAttribute('class', 'button button--play');\n  })\n\n  play.addEventListener('click', e => {\n    e.preventDefault();\n\n    if (video.paused) {\n      video.play();\n      empty(play);\n      play.appendChild(document.createTextNode('Stoppa'));\n      play.setAttribute('class', 'button button--pause');\n    }\n    else {\n      video.pause();\n      empty(play);\n      play.appendChild(document.createTextNode('Spila'));\n      play.setAttribute('class', 'button button--play');\n    }\n  });\n\n  mute.addEventListener('click', e => {\n    e.preventDefault();\n\n    if(video.volume == 1.0) {\n      video.volume = 0.0;\n      empty(mute);\n      mute.appendChild(document.createTextNode('Hljóð á'));\n      mute.setAttribute('class', 'button button--sound');\n    } else {\n      video.volume = 1.0;\n      empty(mute);\n      mute.appendChild(document.createTextNode('Hljóð af'));\n      mute.setAttribute('class', 'button button--mute');\n    }\n  });\n\n  fullscreen.addEventListener('click', e => {\n    e.preventDefault();\n\n    //requestFullScreen verður það fullscreen fall sem vafrinn styður\n    var requestFullScreen = video.requestFullscreen || video.msRequestFullscreen || video.mozRequestFullScreen || video.webkitRequestFullscreen;\n\n    requestFullScreen.call(video);\n  })\n\n  prev.addEventListener('click', e => {\n    e.preventDefault();\n\n    video.currentTime -= 3;\n  })\n\n  next.addEventListener('click', e => {\n    e.preventDefault();\n\n    video.currentTime += 3;\n  })\n\n}\n/*\n* empty tæmir öll börn el.\n*/\nfunction empty(el) {\n  while(el.firstChild) {\n    el.removeChild(el.firstChild);\n  }\n}\n\n/*\n* loadJSON tekur við falli callback sem tekur response\n* og vinnur með það\n*/\nfunction loadJSON(callback) {\n  const r = new XMLHttpRequest();\n  r.overrideMimeType(\"application/json\");\n  r.open('GET', 'videos.json', true);\n\n\n  r.onload = function() {\n    if (r.status >= 200 && r.status < 400) {\n      callback(r.response);\n    } else {\n      console.log('villa!',r);\n    }\n  };\n\n  r.onerror = function() {\n    console.log('villa í tengingu');\n  }\n\n  r.send();\n}\n\n/*\n* parseQuery skoðar url og skilar gildi id frá querystrengnum.\n* Ef query strengur er ekki réttur skilar parseQuery -1.\n*/\nfunction parseQuery() {\n  const query = window.location.search.substring(1);\n    const vars = query.split('&');\n    for (let i = 0; i < vars.length; i++) {\n        const pair = vars[i].split('=');\n        if (decodeURIComponent(pair[0]) == 'id') {\n            return decodeURIComponent(pair[1]);\n        }\n    }\n    console.log('Query strengur er ekki réttur');\n}\n\n/*\n* getIndex tekur fylki data af hlutum obj og skilar index af data\n* með attribute obj.id=id.\n*/\nfunction GetIndexById(data, id) {\n  let ind = 0;\n  let index = 0;\n\n\n  data.forEach(function(obj) {\n    if(obj.id == id) {\n      index = ind;\n    } else {\n      ind += 1;\n    }\n  });\n\n  return index;\n}\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  createVideo();\n});\n"]}