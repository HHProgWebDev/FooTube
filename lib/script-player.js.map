{"version":3,"sources":["../src/script-player.js"],"names":["empty","el","firstChild","removeChild","loadJSON","callback","r","XMLHttpRequest","overrideMimeType","open","onload","status","response","console","log","onerror","send","parseQuery","query","window","location","search","substring","vars","split","result","forEach","v","pair","decodeURIComponent","GetIndexById","data","id","temp","index","obj","parseInt","createVideo","body","document","querySelector","main","title","createElement","videoframe","video","videoplayerDiv","buttonDiv","back","play","mute","fullscreen","next","returnToIndex","loadError","setAttribute","appendChild","createTextNode","JSON","parse","videos","poster","addEventListener","e","preventDefault","pause","currentTime","playClick","paused","volume","requestFullScreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","call"],"mappings":"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","file":"script-player.js","sourcesContent":["/*\n* Þessi javascript skrá er fyrir myndbandaspilarann fyrir\n* player.html\n*/\n\n/*\n* empty tæmir öll börn el.\n*/\nfunction empty(el) {\n  while (el.firstChild) {\n    el.removeChild(el.firstChild);\n  }\n}\n\n/*\n* loadJSON tekur við falli callback sem tekur response\n* og vinnur með það\n*/\nfunction loadJSON(callback) {\n  const r = new XMLHttpRequest();\n  r.overrideMimeType('application/json');\n  r.open('GET', 'videos.json', true);\n\n\n  r.onload = () => {\n    if (r.status >= 200 && r.status < 400) {\n      callback(r.response);\n    } else {\n      // Lætur vita að villa hefur átt sér stað\n      // eslint-disable-next-line no-console\n      console.log('villa!', r);\n    }\n  };\n\n  r.onerror = () => {\n    // Lætur vita að villa hefur átt sér stað\n    // eslint-disable-next-line no-console\n    console.log('villa í tengingu');\n  };\n\n  r.send();\n}\n\n/*\n* parseQuery skoðar url og skilar gildi id frá querystrengnum.\n* Ef query strengur er ekki réttur skilar parseQuery -1.\n*/\nfunction parseQuery() {\n  const query = window.location.search.substring(1);\n  const vars = query.split('&');\n  let result = -1;\n\n  vars.forEach((v) => {\n    const pair = v.split('=');\n    if (decodeURIComponent(pair[0]) === 'id') {\n      result = decodeURIComponent(pair[1]);\n    }\n  });\n\n  return result;\n}\n\n/*\n* getIndex tekur fylki data af hlutum obj og skilar index af data\n* með attribute obj.id = id.\n* Ef ekki er til obj með obj.id = id þá skilar fallið -1.\n*/\nfunction GetIndexById(data, id) {\n  let temp = -1;\n  let index = -1;\n\n  data.forEach((obj) => {\n    if (obj.id === parseInt(id, 10)) {\n      index = temp + 1;\n    } else {\n      temp += 1;\n    }\n  });\n\n  return index;\n}\n\n/*\n* createVideo fallið býr til html fyrir player.html\n*/\nfunction createVideo() {\n  //  Finna body og main element\n  const body = document.querySelector('body');\n  const main = document.querySelector('main');\n  //  Tæma body element.\n  empty(body);\n\n  //  Búa til element.\n  const title = document.createElement('h1');\n  const videoframe = document.createElement('div');\n  const video = document.createElement('video');\n  const videoplayerDiv = document.createElement('div');\n  const buttonDiv = document.createElement('div');\n  const back = document.createElement('button');\n  const play = document.createElement('button');\n  const mute = document.createElement('button');\n  const fullscreen = document.createElement('button');\n  const next = document.createElement('button');\n  const returnToIndex = document.createElement('a');\n  const loadError = document.createElement('p');\n\n  //  Bæta við texta og attribute á element.\n  title.setAttribute('class', 'video-title');\n  videoframe.setAttribute('class', 'video-frame');\n  video.setAttribute('class', 'videoplayer');\n  videoplayerDiv.setAttribute('class', 'videoplayer-overlay');\n  buttonDiv.setAttribute('class', 'button-block');\n  back.appendChild(document.createTextNode('Fyrra'));\n  back.setAttribute('class', 'button button--back');\n  play.appendChild(document.createTextNode('Spila'));\n  play.setAttribute('class', 'button button--play');\n  mute.appendChild(document.createTextNode('Hljóð af'));\n  mute.setAttribute('class', 'button button--mute');\n  fullscreen.appendChild(document.createTextNode('Allur skjárinn'));\n  fullscreen.setAttribute('class', 'button button--fullscreen');\n  next.appendChild(document.createTextNode('Næsta'));\n  next.setAttribute('class', 'button button--next');\n  returnToIndex.appendChild(document.createTextNode('Til baka'));\n  returnToIndex.setAttribute('href', './index.html');\n  returnToIndex.setAttribute('class', 'back-to-index');\n  loadError.appendChild(document.createTextNode('Gat ekki hlaðið myndbandi'));\n  loadError.setAttribute('class', 'hidden');\n\n  //  Bæta við upplýsingum úr videos.json skv. query streng í url.\n  loadJSON((response) => {\n    const data = JSON.parse(response);\n    const index = GetIndexById(data.videos, parseQuery());\n    if (index >= 0) {\n      title.appendChild(document.createTextNode(data.videos[index].title));\n      video.setAttribute('src', data.videos[index].video);\n      video.setAttribute('poster', data.videos[index].poster);\n    } else {\n      title.setAttribute('class', 'hidden');\n      buttonDiv.setAttribute('class', 'hidden');\n      videoframe.setAttribute('class', 'hidden');\n      loadError.setAttribute('class', 'loadError');\n    }\n  });\n\n  //  Setja inn element\n  body.appendChild(main);\n  main.appendChild(title);\n  main.appendChild(videoframe);\n  videoframe.appendChild(video);\n  videoframe.appendChild(videoplayerDiv);\n  main.appendChild(buttonDiv);\n  buttonDiv.appendChild(back);\n  buttonDiv.appendChild(play);\n  buttonDiv.appendChild(mute);\n  buttonDiv.appendChild(fullscreen);\n  buttonDiv.appendChild(next);\n  main.appendChild(loadError);\n  main.appendChild(returnToIndex);\n\n  //  Bæta við takka atburða hlustendum.\n  video.addEventListener('ended', (e) => {\n    e.preventDefault();\n\n    video.pause();\n    video.currentTime = 0;\n    empty(play);\n    play.appendChild(document.createTextNode('Spila'));\n    play.setAttribute('class', 'button button--play');\n  });\n\n  function playClick(e) {\n    e.preventDefault();\n\n    if (video.paused) {\n      video.play();\n      empty(play);\n      play.appendChild(document.createTextNode('Stoppa'));\n      play.setAttribute('class', 'button button--pause');\n      videoplayerDiv.setAttribute('class', 'videoplayer-overlay playing');\n    } else {\n      video.pause();\n      empty(play);\n      play.appendChild(document.createTextNode('Spila'));\n      play.setAttribute('class', 'button button--play');\n      videoplayerDiv.setAttribute('class', 'videoplayer-overlay');\n    }\n  }\n\n  play.addEventListener('click', playClick);\n  videoplayerDiv.addEventListener('click', playClick);\n\n  mute.addEventListener('click', (e) => {\n    e.preventDefault();\n\n    if (video.volume === 1.0) {\n      video.volume = 0.0;\n      empty(mute);\n      mute.appendChild(document.createTextNode('Hljóð á'));\n      mute.setAttribute('class', 'button button--sound');\n    } else {\n      video.volume = 1.0;\n      empty(mute);\n      mute.appendChild(document.createTextNode('Hljóð af'));\n      mute.setAttribute('class', 'button button--mute');\n    }\n  });\n\n  fullscreen.addEventListener('click', (e) => {\n    e.preventDefault();\n\n    // requestFullScreen verður það fullscreen fall sem vafrinn styður\n    const requestFullScreen = video.requestFullscreen\n      || video.msRequestFullscreen\n      || video.mozRequestFullScreen\n      || video.webkitRequestFullscreen;\n\n    requestFullScreen.call(video);\n  });\n\n  back.addEventListener('click', (e) => {\n    e.preventDefault();\n\n    video.currentTime -= 3;\n  });\n\n  next.addEventListener('click', (e) => {\n    e.preventDefault();\n\n    video.currentTime += 3;\n  });\n}\n/*\n* Þessi atburða hlustandi keyrist þegar DOM tréið\n* er að fullu hlaðið\n*/\ndocument.addEventListener('DOMContentLoaded', () => {\n  createVideo();\n});\n"]}